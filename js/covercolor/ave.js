const coverColor=()=>{const e=PAGE_CONFIG.color;if(e)return void setThemeColors(e);const o=document.getElementById("post-cover")?.src;o?handleApiColor(o):setDefaultThemeColors()},handleApiColor=e=>{const o=JSON.parse(localStorage.getItem("Solitude"))||{},t=o.postcolor?.[e]?.value;t?setThemeColors(t):img2color(e)},img2color=e=>{fetch(`${e}?imageAve`).then((e=>e.json())).then((({RGB:o})=>{o=`#${o.slice(2)}`,setThemeColors(o),cacheColor(e,o)})).catch(console.error)},setThemeColors=e=>{if(!e)return setDefaultThemeColors();const[o,t,r]=e.match(/\w\w/g).map((e=>parseInt(e,16))),[l,n,s,c]=[`${e}`,`${e}23`,`${e}dd`,`${e}00`];document.documentElement.style.setProperty("--efu-main",l),document.documentElement.style.setProperty("--efu-main-op",n),document.documentElement.style.setProperty("--efu-main-op-deep",s),document.documentElement.style.setProperty("--efu-main-none",c),adjustBrightness(o,t,r),document.getElementById("coverdiv").classList.add("loaded"),initThemeColor()},setDefaultThemeColors=()=>{["--efu-theme","--efu-theme-op","--efu-theme-op-deep","--efu-theme-none"].forEach(((e,o)=>document.documentElement.style.setProperty(["--efu-main","--efu-main-op","--efu-main-op-deep","--efu-main-none"][o],`var(${e})`))),initThemeColor()},cacheColor=(e,o)=>{const t=JSON.parse(localStorage.getItem("Solitude"))||{postcolor:{}};t.postcolor[e]={value:o,expiration:Date.now()+coverColorConfig.time},localStorage.setItem("Solitude",JSON.stringify(t))},adjustBrightness=(e,o,t)=>{Math.round((299*e+587*o+114*t)/1e3)<125&&(document.querySelectorAll(".card-content").forEach((e=>e.style.setProperty("--efu-card-bg","var(--efu-white)"))),document.querySelectorAll(".author-info__sayhi").forEach((e=>{e.style.setProperty("background","var(--efu-white-op)"),e.style.setProperty("color","var(--efu-white)")})))};